(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{109:function(e,t,a){e.exports={login__container:"Login_login__container__2XI_u",login__form:"Login_login__form__GAZY_"}},120:function(e,t,a){e.exports={loader__container:"Loader_loader__container__3atXp"}},223:function(e,t,a){},224:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return $}));var c=a(0),n=a.n(c),r=a(49),i=a.n(r),o=a(71),s=a(10),h=a(22),l=a(235),_=a(236),u=a(234),j=a(232),d=a(135),b=a(45),p=a.n(b),O=a(62),m=a(139),x=a(57),f=a(231),v=a(120),g=a.n(v),C=a(18),y=function(e){return Object(C.jsx)("div",{className:g.a.loader__container,children:Object(C.jsx)(f.a,{size:"large"})})},N=a(12),I=a.n(N),S=a(1),k=a.n(S),w=a(3),A=a(109),P=a.n(A),T="/login",L="/chat",z=[{path:T,Element:function(e){var t=Object(c.useContext)($).auth,a=function(){var e=Object(w.a)(k.a.mark((function e(){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new x.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:P.a.login__container,children:Object(C.jsxs)("div",{className:P.a.login__form,children:[Object(C.jsx)("h2",{children:"Login"}),Object(C.jsx)(d.a,{onClick:a,type:"primary",children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})]})})}}],E=[{path:L,Element:function(){var e=Object(c.useContext)($),t=e.auth,a=e.firestore,n=Object(O.a)(t),r=Object(s.a)(n,1)[0],i=Object(m.a)(a.collection("messages").orderBy("createdAt")),o=Object(s.a)(i,2),h=o[0],b=o[1],f=Object(c.useState)(""),v=Object(s.a)(f,2),g=v[0],N=v[1],S=Object(c.useState)(!1),k=Object(s.a)(S,2),w=k[0],A=k[1];return b?Object(C.jsx)(y,{}):Object(C.jsxs)("div",{className:p.a.chat__container,children:[Object(C.jsx)("h1",{className:p.a.chat__title,children:"Chat"}),Object(C.jsxs)("div",{className:p.a.chat,children:[Object(C.jsx)("div",{className:p.a.chat__boxWrapper,children:null===h||void 0===h?void 0:h.map((function(e,t){var a;return Object(C.jsx)(l.a,{className:p.a.row,children:Object(C.jsxs)(_.a,{span:24,children:[Object(C.jsxs)("div",{className:p.a.chat__person,children:[Object(C.jsx)(u.a,{src:e.photoUrl,size:42}),Object(C.jsx)("p",{className:p.a.person__name,children:e.displayName})]}),Object(C.jsx)("p",{className:I()(p.a.chat__text,(null===r||void 0===r?void 0:r.uid)===e.uid?p.a.chat__text:p.a.chat__interlocutor),children:e.text}),Object(C.jsx)("span",{className:p.a.chat__time,children:new Date(1e3*(null===e||void 0===e||null===(a=e.createdAt)||void 0===a?void 0:a.seconds)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},t)}))}),Object(C.jsxs)("div",{className:p.a.chat__input,children:[Object(C.jsx)(j.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:g,onChange:function(e){return N(e.target.value)},className:w?p.a.emptyInput:void 0,onKeyPress:function(){return A(!1)}}),Object(C.jsx)(d.a,{onClick:function(){g?(a.collection("messages").add({uid:null===r||void 0===r?void 0:r.uid,displayName:null===r||void 0===r?void 0:r.displayName,photoUrl:null===r||void 0===r?void 0:r.photoURL,text:g,createdAt:x.a.firestore.FieldValue.serverTimestamp()}),A(!1),N("")):A(!0)},type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})]})}}],U=function(){var e=Object(h.f)(),t=Object(c.useContext)($).auth,a=Object(O.a)(t),n=Object(s.a)(a,1)[0];return Object(c.useEffect)((function(){e(n?L:T)}),[n,e]),n?Object(C.jsx)(h.c,{children:E.map((function(e,t){var a=e.path,c=e.Element;return Object(C.jsx)(h.a,{path:a,element:Object(C.jsx)(c,{})},t)}))}):Object(C.jsx)(h.c,{children:z.map((function(e,t){var a=e.path,c=e.Element;return Object(C.jsx)(h.a,{path:a,element:Object(C.jsx)(c,{})},t)}))})},W=a(233),X=a(237),J=(a(222),a(8)),B=a(20),G=function(e){var t=document.querySelector(":root");["header","background","chat__text"].map((function(a){t.style.setProperty("--theme-default-".concat(a),"var(--theme-".concat(e,"-").concat(a,")"))}))},D=function(e,t){localStorage.setItem(e,JSON.stringify(t))},F=function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)},K=["children"],M="light",q="dark",H=Object(c.createContext)(),Q=function(e){var t=e.children,a=Object(B.a)(e,K),n=Object(c.useState)(F("theme")||M),r=Object(s.a)(n,2),i=r[0],o=r[1];G(i);return Object(C.jsx)(H.Provider,Object(J.a)(Object(J.a)({value:{changeTheme:function(e){G(e),o(e),D("theme",e)},theme:i}},a),{},{children:t}))},R=function(e){var t=Object(c.useContext)($).auth,a=Object(O.a)(t),n=Object(s.a)(a,1)[0],r=Object(c.useContext)(H),i=Object(c.useState)(F("checkedTheme")||!1),h=Object(s.a)(i,2),l=h[0],_=h[1];D("checkedTheme",l);return Object(C.jsxs)(W.a,{mode:"horizontal",style:{display:"flex",justifyContent:"flex-end",backgroundColor:"var(--theme-default-background)"},children:[n?Object(C.jsx)(W.a.Item,{onClick:function(){return t.signOut()},children:Object(C.jsx)(o.b,{to:"",style:{color:"var(--theme-default-header)"},children:"\u0412\u044b\u0439\u0442\u0438"})},"SignOut"):Object(C.jsx)(W.a.Item,{children:Object(C.jsx)(o.b,{to:T,style:{color:"var(--theme-default-header)"},children:"\u0412\u043e\u0439\u0442\u0438"})},"SignIn"),Object(C.jsx)(W.a.Item,{children:Object(C.jsx)(X.a,{defaultChecked:l,onChange:function(){r.theme===M?(r.changeTheme(q),_(!0)):r.theme===q&&(r.changeTheme(M),_(!1))}})})]})},V=(a(223),function(){var e=Object(c.useContext)($).auth,t=Object(O.a)(e),a=Object(s.a)(t,3),n=(a[0],a[1]);a[2];return n?Object(C.jsx)(y,{}):Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(R,{}),Object(C.jsx)(U,{})]})});a(224),a(225),a(228);x.a.initializeApp({apiKey:"AIzaSyCTdUK8ry-fIV0XP88xSy_JUUpHD-dQqt4",authDomain:"chat-app-717e2.firebaseapp.com",projectId:"chat-app-717e2",storageBucket:"chat-app-717e2.appspot.com",messagingSenderId:"214754581800",appId:"1:214754581800:web:ddcd0111c0639b9f49c41d",measurementId:"G-NXC6F14MSZ"});var Y=x.a.auth(),Z=x.a.firestore(),$=Object(c.createContext)(null);i.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(Q,{children:Object(C.jsx)($.Provider,{value:{firebase:x.a,auth:Y,firestore:Z},children:Object(C.jsx)(o.a,{children:Object(C.jsx)(V,{})})})})}),document.getElementById("root"))},45:function(e,t,a){e.exports={chat__container:"Chat_chat__container__362OX",chat__title:"Chat_chat__title__3edtP",chat:"Chat_chat__i58WX",chat__boxWrapper:"Chat_chat__boxWrapper__Hbi4T",row:"Chat_row__1o5zY",chat__person:"Chat_chat__person__2RBLb",person__name:"Chat_person__name__32pAv",chat__text:"Chat_chat__text__1gMfF",chat__time:"Chat_chat__time__3-NNf",chat__interlocutor:"Chat_chat__interlocutor__18Q7t",chat__input:"Chat_chat__input__W2-xA",emptyInput:"Chat_emptyInput__3_--P"}}},[[227,1,2]]]);
//# sourceMappingURL=main.77c1fa46.chunk.js.map